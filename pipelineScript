pipeline {
	agent any

	stages {
		stage('build'){

			steps{
				withMaven(maven: 'MVN353'){

				sh 'mvn clean compile -f ./mvn_project/pom.xml -s maven_user_settings.xml'
				} 
				
			}
		}
		stage('test'){
			steps{
			withMaven(maven: 'MVN353'){
					sh 'mvn test'
					//junit 'reports/**/*.xml'
				}
			}
		}
		stage('Deploy'){
			steps{
				withMaven(maven: 'MVN353'){

					sh 'make deploy -s maven_user_settings.xml'
				}			
			}
		}

	}


}